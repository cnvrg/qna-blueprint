# Question Answer Generator Training
Question Answer generation is the task of generating pairs of questions and answers given some input text.
This library trains the Question Answer Generator. 
For answer aware question generation we usually need 3 models, first which will extract answer like spans, second model will generate question on that answer and third will be a QA model which will take the question and produce an answer, then we can compare the two answers to see if the generated question is correct or not.

Having 3 models for single task is lot of complexity, so goal is to create a multi-task model which can do all of these 3 tasks:

- extract answer like spans
- generate question based on the answer
- QA
  
T5 model is fine-tuned in multi-task way. This model will be further trained on the input data. The pytorch datasets generated by the `prepare` library will be used.


### Input
- `--num_train_epochs` Specify the number of times the model must go through the entire dataset it learning process.
- `--output_dir` Specify the name of the output folder that will contain the final trained model. You can download and save this folder for future usage.  

  
### Output
The final output contains a `t5-small-qg-hl` folder which contains the trained model and the tokenizer. This folder will be referenced when we try to use new model for generationg Questions and Answers.

### How to run

```
cnvrg run  --datasets='[{id:{dataset name},commit:{commit_id for dataset}}]' --machine={compute name} --image={docker image name} --sync_before=false python3 Train/run_qg.py --epochs {number of epochs} --output_dir {name of output folder}

```
Example run

```
cnvrg run  --datasets='[{id:"qna_trivia_data",commit:"5f1cd7c3fb68ae7c679f8c33966610670d32ff1e"}]' --machine="default.gpu" --image=tensorflow/tensorflow:latest-gpu --sync_before=false python3 Train/run_qg.py --epochs 10 --output_dir t5-small-qg-hl

```

### Reference
https://github.com/patil-suraj/question_generation 
